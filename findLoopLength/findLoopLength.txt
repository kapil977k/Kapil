package prcs;


  Click `Run` to execute the snippet below!
 

import java.io.;
import java.util.;


  To execute Java, please define static void main on a class
  named Solution.
 
  If you need more classes, simply define them inline.
 
public class solution {
   
    public static int findLoopLength(int[] arr) {
        int n = arr.length;

        for (int i = 0; i  n; i++) {
            int slow = i, fast = i;

            while (true) {
                 Move slow pointer one step
                slow = getNextIndex(arr, slow, n);

                 Move fast pointer two steps
                fast = getNextIndex(arr, fast, n);
                if (fast != -1) {
                    fast = getNextIndex(arr, fast, n);
                }

                if (slow == -1  fast == -1  slow == fast) break;
            }

             Check if we found a loop
            if (slow != -1 && slow == fast) {
                 Calculate the loop length
                int loopLength = 1;
                int current = getNextIndex(arr, slow, n);
                while (current != slow) {
                    current = getNextIndex(arr, current, n);
                    loopLength++;
                }
                return loopLength;
            }
        }
        return -1;
    }

    private static int getNextIndex(int[] arr, int i, int n) {
        int nextIndex = ((i + arr[i]) % n + n) % n;  Ensure a positive index

         Detect direction; If directions differ, no valid move
        if (nextIndex == i  (arr[nextIndex]  0) != (arr[i]  0)) {
            return -1;
        }
        return nextIndex;
    }

 public static void main(String[] args) {
        int[] arr = {2, -1, 1, 2, 2};
        System.out.println(findLoopLength(arr));
    }



}

